// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)

#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/gpio/gpio.h>

/ {
	interrupt-parent = <&gic>;
	#address-cells = <1>;
	#size-cells = <1>;

	reserved-memory {
		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		npu_binary@84000000 {
			no-map;
			reg = <0x84000000 0xA00000>;
		};

		npu_flag@84B0000 {
			no-map;
			reg = <0x84B00000 0x100000>;
		};

		npu_pkt@85000000 {
			no-map;
			reg = <0x85000000 0x1A00000>;
		};

		npu_phyaddr@86B00000 {
			no-map;
			reg = <0x86B00000 0x100000>;
		};

		npu_rxdesc@86D00000 {
			no-map;
			reg = <0x86D00000 0x100000>;
		};
	};

	psci {
		compatible = "arm,psci-0.2";
		method = "smc";
	};

	cpus {
		#address-cells = <1>;
		#size-cells = <0>;

		cpu-map {
			cluster0 {
				core0 {
					cpu = <&cpu0>;
				};
				core1 {
					cpu = <&cpu1>;
				};
			};
		};

		cpu0: cpu@0 {
			device_type = "cpu";
			compatible = "arm,cortex-a53";
			reg = <0x0>;
			enable-method = "psci";
			clock-frequency = <80000000>;
			next-level-cache = <&L2_0>;
		};

		cpu1: cpu@1 {
			device_type = "cpu";
			compatible = "arm,cortex-a53";
			reg = <0x1>;
			enable-method = "psci";
			clock-frequency = <80000000>;
			next-level-cache = <&L2_0>;
		};

		L2_0: l2-cache0 {
			compatible = "cache";
		};
	};

	scu: system-controller@1fa20000 {
		compatible = "airoha,en7523-scu";
		reg = <0x1fa20000 0x400>,
		      <0x1fb00000 0x1000>;
		#clock-cells = <1>;
	};

	gic: interrupt-controller@9000000 {
		compatible = "arm,gic-v3";
		interrupt-controller;
		#interrupt-cells = <3>;
		#address-cells = <1>;
		#size-cells = <1>;
		reg = <0x09000000 0x20000>,
		      <0x09080000 0x80000>,
		      <0x09400000 0x2000>,
		      <0x09500000 0x2000>,
		      <0x09600000 0x20000>;
		interrupts = <GIC_PPI 9 IRQ_TYPE_LEVEL_LOW>;
	};

	timer {
		compatible = "arm,armv8-timer";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 13 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 14 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 11 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 10 IRQ_TYPE_LEVEL_LOW>;
	};

	uart1: serial@1fbf0000 {
		compatible = "ns16550";
		reg = <0x1fbf0000 0x30>;
		reg-io-width = <4>;
		reg-shift = <2>;
		interrupts = <GIC_SPI 18 IRQ_TYPE_LEVEL_HIGH>;
		clock-frequency = <1843200>;
		status = "okay";
	};

	gpio0: gpio@1fbf0200 {
		compatible = "airoha,en7523-gpio";
		reg = <0x1fbf0204 0x4>,
		      <0x1fbf0200 0x4>,
		      <0x1fbf0220 0x4>,
		      <0x1fbf0214 0x4>;
		gpio-controller;
		#gpio-cells = <2>;
	};

	gpio1: gpio@1fbf0270 {
		compatible = "airoha,en7523-gpio";
		reg = <0x1fbf0270 0x4>,
		      <0x1fbf0260 0x4>,
		      <0x1fbf0264 0x4>,
		      <0x1fbf0278 0x4>;
		gpio-controller;
		#gpio-cells = <2>;
	};

	pcie@0x1fa91000 {
	  compatible = "ecnt,pcie-ecnt";
	  device_type = "pci";
	  reg = <0x1fa91000 0x1000>,
		      <0x1fa92000 0x1000>,
		      <0x1fa90000 0x1000>,	/* pcie top*/
		      <0x1a100000 0x1000>,	/* switch lane */
		      <0x1a148000 0x1000>,	/* 4, rc0 phy base, for change xtal setting */
		      <0x1a14a000 0x1000>;	/* 5, rc1 phy base, for change xtal setting */
    interrupts = <GIC_SPI 39 IRQ_TYPE_LEVEL_HIGH>,  //23+16
          		   <GIC_SPI 40 IRQ_TYPE_LEVEL_HIGH>;  //24+16
	  bus-range = <0x00 0xff>;
	  #address-cells = <3>;
	  #size-cells = <2>;
	  /* change xtal for 40M, default is 25M */
	  /* change-xtal; */
	  /* disable io coherent for RC and EP default. */
	  /*dma-coherent;*/
	  ranges = <0x82000000 0 0x20000000  0x20000000  0 0x4000000>;

	  pcie0: pcie@0,0 {
	    device_type = "pci";
	    reg = <0x0000 0 0 0 0>;
	    #address-cells = <3>;
	    #size-cells = <2>;
	    #interrupt-cells = <1>;
	    ranges;
	    interrupt-map-mask = <0 0 0 7>;
	    interrupt-map = <0 0 0 1 &pcie_intc0 1>,
			    		        <0 0 0 2 &pcie_intc0 2>,
					            <0 0 0 3 &pcie_intc0 3>,
					            <0 0 0 4 &pcie_intc0 4>;
	    pcie-port = <0>;
	    num-lanes = <1>;
	    status = "okay";
	    pcie_intc0: interrupt-controller {
	          	      interrupt-controller;
				            #address-cells = <0>;
				            #interrupt-cells = <1>;
			            };
	  };

	  pcie1: pcie@1,0 {
			device_type = "pci";
			reg = <0x0800 0 0 0 0>;
			#address-cells = <3>;
			#size-cells = <2>;
			#interrupt-cells = <1>;
			ranges;
			interrupt-map-mask = <0 0 0 7>;
			interrupt-map = <0 0 0 1 &pcie_intc1 1>,
			            		<0 0 0 2 &pcie_intc1 2>,
					            <0 0 0 3 &pcie_intc1 3>,
					            <0 0 0 4 &pcie_intc1 4>;
			pcie-port = <1>;
			num-lanes = <1>;
			status = "okay";
			pcie_intc1: interrupt-controller {
				            interrupt-controller;
				            #address-cells = <0>;
				            #interrupt-cells = <1>;
			            };
		};
	};

	spi_ctrl: spi_controller@1fa10000 {
		compatible = "econet,ecnt-spi_ctrl";
		reg = <0x1fa10000 0x140>,		//SPI Controller Base
			  <0x00000000 0x1000>;		//SPI Controller auto read interrupt test
		interrupts = <GIC_SPI 51 IRQ_TYPE_LEVEL_HIGH>;
	};

	spi_spi2nfi: spi_spi2nfi@1fa11000 {
		compatible = "econet,ecnt-spi2nfi";
		reg = <0x1fa11000 0x160>;	//NFI2SPI
	};

	spi_ecc: spi_ecc@1fa12000 {
		compatible = "econet,ecnt-spi_ecc";
		reg = <0x1fa12000 0x150>;	//NFI ECC
	};

	nand_flash: nand@1fa10000 {
		compatible = "econet,ecnt-nand";
		spi-controller = <&spi_ctrl>;
		spi2nfi = <&spi_spi2nfi>;
		spi-ecc = <&spi_ecc>;
	};
	
	partition@1fa10000 {
		compatible = "econet,ecnt-partition";
		#address-cells = <1>;
		#size-cells = <1>;

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			bootloader@0 {
				label = "bootloader";
				reg = <0x00000000 0x00080000>;
			};
			art@80000 {
				label = "art";
				reg = <0x00080000 0x00040000>;
			};
			tclinux@c0000 {
				label = "tclinux";
				reg = <0x000c0000 0x02800000>;
			};
			tclinux_slave@28c0000 {
				label = "tclinux_slave";
				reg = <0x028c0000 0x02800000>;
			};		
			rootfs_data@50c0000 {
				label = "rootfs_data";
				reg = <0x050c0000 0x00800000>;
			};
		};
	};

	leds {
		compatible = "gpio-leds";

		internet {
			label = "internet";
			gpios = <&gpio0 1 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		phy_tx_power_disable {
			label = "phy_tx_power_disable";
			gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "dsldev";
		};
		power {
			label = "power";
			gpios = <&gpio0 11 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "dsldev";
		};
		usb_0 {
			label = "usb_0";
			gpios = <&gpio0 4 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		voip_hook {
			label = "voip_hook";
			gpios = <&gpio0 5 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		voip_hook2 {
			label = "voip_hook2";
			gpios = <&gpio0 27 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		wlan {
			label = "wlan";
			gpios = <&gpio0 6 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		wps {
			label = "wps";
			gpios = <&gpio0 26 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		xponLos {
			label = "xponLos";
			gpios = <&gpio0 3 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
		
		xponStatus {
			label = "xponStatus";
			gpios = <&gpio0 10 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "dsldev";
		};
	};
};